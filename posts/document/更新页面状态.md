页面不是一成不变的，很多时候我们需要动态更新页面，特别是在用户操作之后，我们要对页面做出更新，使其能够通过 UI 的变化响应用户的操作。

## 定义转移函数

在 ```cmis``` 中，要改变在 ```_assets/state.js``` 文件中定义的页面状态，必须通过 ```转移函数``` 才能完成。

开发者可以在 ```_assets/transition.js``` 文件中定义并导出 ```转移函数```。

每一个 ```转移函数``` 都会被注入两个参数，分别代表页面 **当前的** ```核心状态``` 和 ```UI 状态```，如果用户在调用转移函数时传递了参数，那么它们将按顺序追加在这两个注入的参数之后。

转移函数的执行结果要求必须返回一个 **新的对象**，且必须包含两个名为 ```appState``` 和 ```uiState``` 的key，分别代表转移后的页面的 ```核心状态``` 和 ```UI 状态```。

添加 ```转移函数``` 后，项目的结构大致上如下：

```
~/src/pages
	|- index
		|- _assets
		|	|- state.js
		|	|- controller.js
		|	|- transition.js
		|
		|- index.html
```

编辑 ```_assets/transition.js``` 文件：

```javascript
/**
 * 定义并导出状态转移函数，该转移函数用于增加当前用户点击按钮的计数。
 * 
 * @param appState 页面中定义的的核心状态集合
 * @param uiState 页面中定义的 UI 状态集合
 */
export function incCount(appState, uiState) {
	return {
		appState: {
			count: appState.count + 1
		},
		uiState
	};
}
```

## 修改示例

为了演示效果，我们需要修改 ```index.html```、 ```_assets/state.js``` 和 ```_assets/controller.js``` 文件。

修改后的 ```index.html``` 文件内容如下：

```html
<div>
	<p>你点击了按钮 {$appState.count} 次</p>
	<button onClick={$controller.onUserClick}>增加计数</button>
</div>
```

修改后的 ```_assets/state.js``` 文件内容如下：

```javascript
// 初始化核心状态
export const appState = {
	count: 0
};
```

修改后的 ```_assets/controller.js``` 文件内容如下：

```javascript
/**
 * 所有的控制器函数都会被注入一个代表当前页面上下文的对象。
 * 关于控制器函数的更详细内容请查看后续的内容。
 */
export function onUserClick($context) {
	// 通过上下文对象，可以访问到当前页面定义的转移函数。
	$context.transition.incCount();
}
```

## 预览效果

执行如下命令编译项目：

```
cmis build
```

打开浏览器，通过以下 URL 访问示例：

```
http://localhost:3000/
```

点击按钮，页面显示的计数会发生变化。